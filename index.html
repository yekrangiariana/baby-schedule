<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />

    <!-- Load configuration first -->
    <script src="js/config.js"></script>

    <!-- SEO Meta Tags -->
    <title data-config="title">
      Little Agenda - Track Your Baby's Activities
    </title>
    <meta
      name="description"
      data-config="description"
      content="Simple baby activity tracker. Log feedings, diaper changes, and other activities. Works offline and syncs with Google Sheets."
    />
    <meta
      name="keywords"
      data-config="keywords"
      content="baby tracker, baby log, feeding tracker, diaper log, baby activities, parenting tool"
    />
    <meta name="author" data-config="author" content="Little Agenda" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      data-config="baseUrl"
      href="https://yourdomain.com/"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      data-config="baseUrl"
      content="https://yourdomain.com/"
    />
    <meta
      property="og:title"
      data-config="title"
      content="Little Agenda - Track Your Baby's Activities"
    />
    <meta
      property="og:description"
      data-config="description"
      content="Simple baby activity tracker. Log feedings, diaper changes, and other activities. Works offline and syncs with Google Sheets."
    />
    <meta
      property="og:image"
      data-config="ogImage"
      content="https://yourdomain.com/assets/logo.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" data-config="title" content="Little Agenda" />
    <meta property="og:site_name" data-config="name" content="Little Agenda" />
    <meta property="og:locale" data-config="locale" content="en_US" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:url"
      data-config="baseUrl"
      content="https://yourdomain.com/"
    />
    <meta
      name="twitter:title"
      data-config="title"
      content="Little Agenda - Track Your Baby's Activities"
    />
    <meta
      name="twitter:description"
      data-config="shortDescription"
      content="Simple baby activity tracker. Log feedings, diaper changes, and other activities."
    />
    <meta
      name="twitter:image"
      data-config="twitterImage"
      content="https://yourdomain.com/assets/logo.png"
    />
    <meta
      name="twitter:image:alt"
      data-config="title"
      content="Little Agenda"
    />

    <!-- App Icons & Manifest -->
    <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçº</text></svg>"
    />
    <link
      rel="apple-touch-icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçº</text></svg>"
    />
    <link rel="manifest" href="/manifest.json" />

    <!-- Theme & App Config -->
    <meta name="theme-color" data-config="themeColor" content="#FFF5F7" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta
      name="apple-mobile-web-app-title"
      data-config="shortName"
      content="Little Agenda"
    />
    <meta name="application-name" data-config="name" content="Little Agenda" />
    <meta
      name="msapplication-TileColor"
      data-config="backgroundColor"
      content="#FFF5F7"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/welcome.css" />

    <!-- Apply config to meta tags -->
    <script>
      (function () {
        if (!window.APP_CONFIG) return;
        const config = window.APP_CONFIG;

        // Update all meta tags and elements with data-config attribute
        document.querySelectorAll("[data-config]").forEach(function (el) {
          const configKey = el.getAttribute("data-config");
          const value = config[configKey];

          if (!value) return;

          if (el.tagName === "META") {
            if (el.hasAttribute("content")) {
              el.setAttribute("content", value);
            }
          } else if (el.tagName === "TITLE") {
            el.textContent = value;
          } else if (el.tagName === "LINK" && el.hasAttribute("href")) {
            el.setAttribute("href", value);
          }
        });

        // Update structured data
        const structuredDataScript = document.querySelector(
          'script[type="application/ld+json"]',
        );
        if (structuredDataScript) {
          try {
            const data = JSON.parse(structuredDataScript.textContent);
            data.name = config.name;
            data.description = config.shortDescription;
            data.url = config.baseUrl;
            data.author.name = config.name;
            structuredDataScript.textContent = JSON.stringify(data, null, 2);
          } catch (e) {}
        }

        // Update text content when DOM is loaded
        document.addEventListener("DOMContentLoaded", function () {
          document
            .querySelectorAll("[data-config-text]")
            .forEach(function (el) {
              const configKey = el.getAttribute("data-config-text");
              const value = config[configKey];
              if (value) {
                el.textContent = value;
              }
            });
        });
      })();
    </script>

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Little Agenda",
        "description": "Simple baby activity tracker. Log feedings, diaper changes, and other activities.",
        "url": "https://yourdomain.com/",
        "applicationCategory": "LifestyleApplication",
        "operatingSystem": "All",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "featureList": [
          "Activity tracking",
          "Google Sheets sync",
          "Custom activities",
          "Data export"
        ],
        "author": {
          "@type": "Organization",
          "name": "Little Agenda"
        }
      }
    </script>
  </head>
  <body>
    <!-- Main Screen -->
    <div class="screen" id="homeScreen">
      <main class="screen-content">
        <!-- Today's Summary -->
        <section class="today-summary">
          <h2 data-i18n="todaySummary">üìä Today's Summary</h2>
          <div class="now" id="nowText"></div>
          <div class="today-stats" id="todayTotals">Loading...</div>
          <div
            class="sync-notice sync-notice-warning"
            id="syncNoticeWarning"
            hidden
          >
            <span data-i18n="dataStoredLocally"
              >üí° Data stored locally only.</span
            >
            <button
              class="sync-notice-link"
              id="syncNoticeLink"
              data-i18n="connectGoogleSheets"
            >
              Connect Google Sheets
            </button>
          </div>
        </section>

        <!-- Recent Activity -->
        <section class="recent-activity">
          <h3 data-i18n="recentActivity">Recent Activity</h3>
          <div class="recent-list" id="recentList"></div>
        </section>

      </main>

      <!-- FAB Backdrop -->
      <div class="fab-backdrop" id="fabBackdrop"></div>

      <!-- Floating Action Button -->
      <div class="fab-container" id="fabContainer">
        <div class="fab-menu" id="fabMenu">
          <!-- Menu items will be rendered dynamically -->
          <button class="fab-menu-item fab-past-entry" id="fabPastEntry">
            <span class="fab-menu-icon">üïê</span>
            <span class="fab-menu-label" data-i18n="logPastEntry">Log Past Entry</span>
          </button>
          <div class="fab-menu-activities" id="fabMenuActivities">
            <!-- Activity buttons will be rendered here -->
          </div>
        </div>
        <button class="fab-button" id="fabButton">
          <span class="fab-icon">+</span>
        </button>
      </div>
    </div>

    <!-- Activity Log Screen (Full Page) -->
    <div class="screen screen-modal" id="logScreen" hidden>
      <div class="screen-indicator" data-i18n="logTitle">üìã Log</div>
      <main class="screen-content">
        <!-- Combined Summary Overview -->
        <div class="log-summary-card" id="logSummaryCard">
          <!-- Dynamic summary will be rendered here -->
        </div>

        <div class="summary" id="summary"></div>

        <div class="screen-toolbar">
          <label
            for="dateFilter"
            style="
              font-size: 14px;
              font-weight: 600;
              color: var(--text-primary);
              margin-right: 8px;
            "
            data-i18n="filterByDate"
            >üìÖ Filter by Date:</label
          >
          <input type="date" id="dateFilter" class="date-input" />
          <button
            id="clearFilterBtn"
            class="btn-small"
            style="display: none"
            data-i18n="clearFilter"
          >
            Clear Filter
          </button>
        </div>

        <div class="log-entries" id="logEntries"></div>
      </main>
    </div>

    <!-- Insights Screen (Full Page) -->
    <div class="screen screen-modal" id="insightsScreen" hidden>
      <div class="screen-indicator" data-i18n="insightsTitle">üìà Insights</div>
      <main class="screen-content">
        <!-- Activity Filter Section -->
        <div class="activity-filter-section">
          <h3 data-i18n="showActivities">üìä Show Activities</h3>
          <div class="activity-filter-desc" data-i18n="showActivitiesDesc">
            Select activities to include in the graphs below
          </div>
          <div class="activity-filter-grid" id="activityFilterGrid">
            <!-- Filter checkboxes will be rendered dynamically -->
          </div>
        </div>

        <div class="graphs-container">
          <div class="graph-card">
            <h3 data-i18n="todayActivity">üìÖ Today's Activity</h3>
            <div class="graph-guide" data-i18n="todayActivityDesc">
              Shows activity breakdown for today with a quick overview of what's
              been logged so far
            </div>
            <canvas id="todayChart" width="300" height="200"></canvas>
            <div class="graph-legend" id="todayLegend">
              <!-- Legend will be rendered dynamically -->
            </div>
          </div>
          <div class="graph-card">
            <h3 data-i18n="sevenDayTrend">üìà 7-Day Trend</h3>
            <div class="graph-guide" data-i18n="sevenDayTrendDesc">
              Shows weekly patterns and changes to track how routines develop
              over the past week
            </div>
            <canvas id="weekChart" width="300" height="200"></canvas>
            <div class="graph-legend" id="weekLegend">
              <!-- Legend will be rendered dynamically -->
            </div>
          </div>
          <div class="graph-card">
            <h3 data-i18n="last24Hours">üïë Last 24 Hours</h3>
            <div class="graph-guide" data-i18n="last24HoursDesc">
              Shows hour-by-hour timeline to see exactly when activities
              happened throughout the day
            </div>
            <canvas id="hourlyChart" width="300" height="200"></canvas>
            <div class="graph-legend" id="hourlyLegend">
              <!-- Legend will be rendered dynamically -->
            </div>
          </div>
          <div class="graph-card">
            <h3 data-i18n="timeBetweenActivities">
              ‚è±Ô∏è Time Between Activities
            </h3>
            <div class="graph-guide" data-i18n="timeBetweenActivitiesDesc">
              Shows average time between same activities to help track feeding
              intervals, diaper timing, and sleep patterns
            </div>
            <canvas id="intervalChart" width="300" height="200"></canvas>
            <div class="graph-legend" id="intervalLegend">
              <!-- Legend will be rendered dynamically -->
            </div>
          </div>
          <div class="graph-card">
            <h3 data-i18n="monthlyHabit">üìÖ Monthly Activity Tracker</h3>
            <div class="graph-guide" data-i18n="monthlyHabitDesc">
              Track a single activity across the month to visualize patterns and
              build consistent habits
            </div>
            <div class="habit-activity-selector">
              <label data-i18n="selectActivityToTrack"
                >Select activity to track:</label
              >
              <div id="habitActivityGrid" class="habit-activity-grid">
                <!-- Activity options will be rendered dynamically -->
              </div>
            </div>
            <div id="monthlyCalendar" class="monthly-calendar">
              <!-- Calendar will be rendered dynamically -->
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Settings Screen (Full Page) -->
    <div class="screen screen-modal" id="settingsScreen" hidden>
      <div class="screen-indicator" data-i18n="settingsTitle">‚öôÔ∏è Settings</div>
      <main class="screen-content">
        <div class="settings">
          <!-- Google Sheets Sync Section -->
          <section class="settings-section" id="googleSheetsSection">
            <h2 class="settings-section-title" data-i18n="googleSheetsSync">
              ‚òÅÔ∏è Google Sheets Sync
            </h2>

            <!-- Connected State -->
            <div
              class="sync-notice sync-notice-success"
              id="syncNoticeSuccess"
              hidden
            >
              <span data-i18n="connectedToSheets"
                >‚úì Connected to Google Sheets</span
              >
            </div>

            <!-- Setup State -->
            <div id="syncSetupState">
              <label class="field">
                <span class="field-label" data-i18n="webAppUrl"
                  >Web App URL</span
                >
                <small
                  class="hint"
                  style="margin: 0 0 8px 0"
                  data-i18n="webAppUrlHint"
                >
                  Leave blank for local-only storage.
                </small>
                <div class="field-inline">
                  <input
                    type="url"
                    id="appsScriptUrl"
                    class="input"
                    data-i18n-attr="placeholder"
                    data-i18n="webAppUrlPlaceholder"
                    placeholder="Paste your Google Sheets Web App URL"
                  />
                  <button
                    type="button"
                    id="pasteUrlBtn"
                    class="btn-paste"
                    title="Paste from clipboard"
                    data-i18n="paste"
                  >
                    Paste
                  </button>
                </div>
              </label>

              <button
                id="saveSettingsBtn"
                class="btn-rounded btn-primary"
                style="width: 100%; margin-bottom: 1rem"
              >
                <span class="btn-text" data-i18n="connectAndSync"
                  >Connect & Sync</span
                >
                <span class="btn-loading" hidden data-i18n="syncing"
                  >Syncing...</span
                >
              </button>
            </div>

            <div class="settings-secondary-actions">
              <button
                id="viewHelpBtn"
                class="btn-secondary-link"
                data-i18n="setupGuide"
              >
                Setup Guide
              </button>
              <button
                id="disconnectBtn"
                class="btn-secondary-link btn-danger-link"
                style="display: none"
                data-i18n="disconnect"
              >
                Disconnect
              </button>
            </div>
          </section>

          <!-- Action Types Section -->
          <section class="settings-section">
            <h2 class="settings-section-title" data-i18n="activityTypes">
              üìù Activity Types
            </h2>
            <p
              class="settings-section-description"
              data-i18n="activityTypesDesc"
            >
              Customise the activities you want to track. Each activity has a
              name, emoji, and colour.
            </p>

            <div id="actionTypesList" class="action-types-list">
              <!-- Action types will be rendered here dynamically -->
            </div>

            <button
              id="addActionTypeBtn"
              class="btn-rounded btn-secondary"
              style="width: 100%; margin-top: 12px"
              data-i18n="addNewActivity"
            >
              ‚ûï Add New Activity
            </button>
          </section>

          <!-- Theme Section -->
          <section class="settings-section">
            <h2 class="settings-section-title" data-i18n="theme">üé® Theme</h2>

            <div class="theme-options">
              <label class="theme-option">
                <input type="radio" name="theme" value="blossom" checked />
                <span class="theme-name" data-i18n="themeBlossom"
                  >üå∏ Blossom</span
                >
              </label>
              <label class="theme-option">
                <input type="radio" name="theme" value="comet" />
                <span class="theme-name" data-i18n="themeComet">‚òÑÔ∏è Comet</span>
              </label>
              <label class="theme-option">
                <input type="radio" name="theme" value="meadow" />
                <span class="theme-name" data-i18n="themeMeadow"
                  >üåø Meadow</span
                >
              </label>
              <label class="theme-option">
                <input type="radio" name="theme" value="midnight" />
                <span class="theme-name" data-i18n="themeMidnight"
                  >üåô Midnight</span
                >
              </label>
            </div>
          </section>

          <!-- Font Section -->
          <section class="settings-section">
            <h2 class="settings-section-title" data-i18n="font">üî§ Font</h2>
            <p class="settings-section-description" data-i18n="fontDesc">
              Choose your preferred font style for better readability.
            </p>

            <div class="font-options">
              <label class="font-option">
                <input type="radio" name="font" value="roboto" checked />
                <span class="font-demo" data-font="roboto">Roboto</span>
              </label>

              <label class="font-option">
                <input type="radio" name="font" value="mono" />
                <span class="font-demo" data-font="mono">Roboto Mono</span>
              </label>

              <label class="font-option">
                <input type="radio" name="font" value="lora" />
                <span class="font-demo" data-font="lora">Lora</span>
              </label>

              <label class="font-option">
                <input type="radio" name="font" value="inter" />
                <span class="font-demo" data-font="inter">Inter</span>
              </label>

              <label class="font-option">
                <input type="radio" name="font" value="creepster" />
                <span class="font-demo" data-font="creepster">Creepster</span>
              </label>
            </div>
          </section>

          <!-- Language Section -->
          <section class="settings-section">
            <h2 class="settings-section-title" data-i18n="language">
              üåê Language
            </h2>
            <p class="settings-section-description" data-i18n="languageDesc">
              Choose your preferred language for the app.
            </p>

            <div class="language-options">
              <label class="language-option">
                <input type="radio" name="language" value="en" checked />
                <span class="language-name" data-i18n="languageEnglish"
                  >English</span
                >
              </label>
              <label class="language-option">
                <input type="radio" name="language" value="fi" />
                <span class="language-name" data-i18n="languageFinnish"
                  >Suomi (Finnish)</span
                >
              </label>
            </div>
            <p
              style="
                font-size: 0.8rem;
                color: var(--text-muted);
                margin-top: 8px;
              "
              data-i18n="languageNote"
            >
              Note: Custom activities keep their creation name. Edit anytime in
              Activity Types above.
            </p>
          </section>

          <!-- Tutorial Section -->
          <section class="settings-section">
            <h2 class="settings-section-title" data-i18n="tutorial">
              üéì Tutorial
            </h2>
            <p class="settings-section-description" data-i18n="tutorialDesc">
              Learn how to use the app with an interactive guided tour.
            </p>

            <button
              id="startTutorialBtn"
              class="btn-rounded btn-secondary"
              style="width: 100%; margin-bottom: 12px"
              data-i18n="startTutorial"
            >
              üéì Start App Tutorial
            </button>
          </section>

          <!-- Data Management Section -->
          <section class="settings-section">
            <h2 class="settings-section-title" data-i18n="dataManagement">
              üíæ Data Management
            </h2>
            <p
              class="settings-section-description"
              data-i18n="dataManagementDesc"
            >
              Export or import your complete data including settings.
            </p>

            <button
              id="exportJSONBtn"
              class="btn-rounded btn-primary"
              style="width: 100%; margin-bottom: 12px"
              data-i18n="exportData"
            >
              üì• Export Data
            </button>

            <button
              id="importJSONBtn"
              class="btn-rounded btn-primary"
              style="width: 100%; margin-bottom: 12px"
              data-i18n="importData"
            >
              üì§ Import Data
            </button>
            <input
              type="file"
              id="importJSONInput"
              accept=".json"
              style="display: none"
            />

            <button
              id="exportCSVBtn"
              class="btn-rounded btn-secondary"
              style="width: 100%"
              data-i18n="exportCSV"
            >
              üìä Export Your Data as CSV
            </button>
          </section>

          <!-- Reset App Section -->
          <section class="settings-section">
            <h2 class="settings-section-title" data-i18n="resetApp">
              üîÑ Reset App
            </h2>
            <p class="settings-section-desc" data-i18n="resetAppDesc">
              Restart the welcome setup and clear all activity data. This cannot
              be undone.
            </p>
            <button
              id="restartWelcomeBtn"
              class="btn-rounded btn-danger"
              style="width: 100%"
              data-i18n="restartWelcome"
            >
              üîÑ Restart App & Remove Data
            </button>
          </section>

          <!-- About & Legal Section -->
          <section class="settings-section">
            <h2 class="settings-section-title" data-i18n="aboutLegal">
              üìã About & Legal
            </h2>
            <p class="settings-section-description" data-i18n="aboutDesc">
              I had to check my baby's bowel movements for a week, and I
              couldn't be bothered to pay three euros to buy an app. Which, in
              hindsight, I should have. So I spent an ungodly amount of time
              making this instead. Anyway, if you find yourself in a situation
              like this, you are welcome to use it, fork it, or adopt it in
              whatever way you like.
            </p>

            <button
              id="aboutAppBtn"
              class="btn-rounded btn-secondary"
              style="width: 100%; margin-bottom: 0.75rem"
              data-i18n="privacyPolicy"
            >
              Privacy Policy
            </button>
            <button
              id="githubRepoBtn"
              class="btn-rounded btn-secondary"
              style="width: 100%"
              data-i18n="githubRepo"
            >
              GitHub Repository
            </button>
          </section>
        </div>
      </main>
    </div>

    <!-- Help/Documentation Screen -->
    <div class="screen screen-modal" id="helpScreen" hidden>
      <header class="screen-header">
        <div></div>
        <h1 data-i18n="setupGuideTitle">üìñ Setup Guide</h1>
        <div></div>
      </header>

      <main class="screen-content" style="padding: 1rem">
        <div
          id="helpContent"
          class="help-content"
          data-i18n="loadingDocumentation"
        >
          Loading documentation...
        </div>
      </main>
    </div>

    <!-- Action Type Editor Modal -->
    <div class="modal-overlay" id="actionTypeModal" hidden>
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle" data-i18n="addActivity">Add Activity</h3>
          <button class="modal-close" id="closeModalBtn">‚úï</button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="editingTypeId" />

          <label class="field">
            <span class="field-label" data-i18n="activityName"
              >Activity Name</span
            >
            <input
              type="text"
              id="typeNameInput"
              class="input"
              data-i18n-attr="placeholder"
              data-i18n="activityNamePlaceholder"
              placeholder="e.g., Sleep, Bath, Play"
              maxlength="20"
            />
            <div
              id="activitySuggestions"
              class="suggestions-container"
              style="display: none"
            >
              <!-- Activity suggestions will appear here -->
            </div>
          </label>

          <label class="field">
            <span class="field-label" data-i18n="emoji">Emoji</span>
            <input
              type="text"
              id="typeEmojiInput"
              class="input emoji-input"
              placeholder="üò¥"
              maxlength="2"
            />
            <div id="emojiPicker" class="emoji-picker">
              <!-- Emoji options will appear here -->
            </div>
          </label>

          <label class="field">
            <span class="field-label" data-i18n="color">Colour</span>
            <div class="color-picker">
              <input type="color" id="typeColorInput" value="#a8d5ff" />
              <input
                type="text"
                id="typeColorText"
                class="input"
                value="#a8d5ff"
                maxlength="7"
              />
            </div>
            <div id="colorPresets" class="color-presets">
              <!-- Color presets will appear here -->
            </div>
          </label>
        </div>
        <div class="modal-footer">
          <button
            id="cancelModalBtn"
            class="btn-rounded btn-secondary"
            data-i18n="cancel"
          >
            Cancel
          </button>
          <button
            id="saveTypeBtn"
            class="btn-rounded btn-primary"
            data-i18n="save"
          >
            Save
          </button>
        </div>
      </div>
    </div>

    <!-- Log Past Entry Modal -->
    <div class="modal-overlay" id="logPastEntryModal" hidden>
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="logPastEntry">Log Past Entry</h3>
          <button class="modal-close" id="closePastEntryModalBtn">‚úï</button>
        </div>
        <div class="modal-body">
          <label class="field">
            <span class="field-label" data-i18n="activityType">Activity Type</span>
            <select id="pastEntryType" class="input">
              <!-- Options will be populated dynamically -->
            </select>
          </label>

          <label class="field">
            <span class="field-label" data-i18n="date">Date</span>
            <input
              type="date"
              id="pastEntryDate"
              class="input"
            />
          </label>

          <label class="field">
            <span class="field-label" data-i18n="time">Time</span>
            <input
              type="time"
              id="pastEntryTime"
              class="input"
            />
          </label>

          <label class="field">
            <span class="field-label" data-i18n="note">Note</span>
            <input
              type="text"
              id="pastEntryNote"
              class="input"
              data-i18n-attr="placeholder"
              data-i18n="notePlaceholder"
              placeholder="Optional note..."
              maxlength="100"
            />
          </label>
        </div>
        <div class="modal-footer">
          <button
            id="cancelPastEntryModalBtn"
            class="btn-rounded btn-secondary"
            data-i18n="cancel"
          >
            Cancel
          </button>
          <button
            id="savePastEntryBtn"
            class="btn-rounded btn-primary"
            data-i18n="logEntry"
          >
            Log Entry
          </button>
        </div>
      </div>
    </div>

    <!-- Edit Entry Modal -->
    <div class="modal-overlay" id="editEntryModal" hidden>
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="editEntry">Edit Entry</h3>
          <button class="modal-close" id="closeEditModalBtn">‚úï</button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="editingEntryId" />

          <label class="field">
            <span class="field-label" data-i18n="activityType">Activity Type</span>
            <select id="editEntryType" class="input">
              <!-- Options will be populated dynamically -->
            </select>
          </label>

          <label class="field">
            <span class="field-label" data-i18n="date">Date</span>
            <input
              type="date"
              id="editEntryDate"
              class="input"
            />
          </label>

          <label class="field">
            <span class="field-label" data-i18n="time">Time</span>
            <input
              type="time"
              id="editEntryTime"
              class="input"
            />
          </label>

          <label class="field">
            <span class="field-label" data-i18n="note">Note</span>
            <input
              type="text"
              id="editEntryNote"
              class="input"
              data-i18n-attr="placeholder"
              data-i18n="notePlaceholder"
              placeholder="Optional note..."
              maxlength="100"
            />
          </label>
        </div>
        <div class="modal-footer">
          <button
            id="cancelEditModalBtn"
            class="btn-rounded btn-secondary"
            data-i18n="cancel"
          >
            Cancel
          </button>
          <button
            id="saveEditBtn"
            class="btn-rounded btn-primary"
            data-i18n="save"
          >
            Save
          </button>
        </div>
      </div>
    </div>

    <!-- Disconnect Confirmation Modal -->
    <div class="modal-overlay" id="disconnectModal" hidden>
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="disconnectTitle">Disconnect from Google Sheets</h3>
          <button class="modal-close" id="closeDisconnectModalBtn">‚úï</button>
        </div>
        <div class="modal-body">
          <p
            style="margin-bottom: 2rem; line-height: 1.5"
            data-i18n="disconnectQuestion"
          >
            What would you like to do with your activity data?
          </p>

          <div class="disconnect-options">
            <button
              id="keepDataBtn"
              class="btn-rounded btn-primary"
              style="width: 100%; margin-bottom: 1rem"
              data-i18n="keepDataLocally"
            >
              Keep Data Locally
            </button>
            <small
              style="
                display: block;
                margin-bottom: 1.5rem;
                opacity: 0.7;
                line-height: 1.4;
              "
              data-i18n="keepDataLocallyDesc"
            >
              Your activities will remain on this device only
            </small>

            <button
              id="deleteDataBtn"
              class="btn-rounded btn-secondary btn-danger-link"
              style="width: 100%"
              data-i18n="deleteAllData"
            >
              Delete All Data
            </button>
            <small
              style="
                display: block;
                margin-top: 0.5rem;
                opacity: 0.7;
                line-height: 1.4;
              "
              data-i18n="deleteAllDataDesc"
            >
              Remove all activities and start fresh
            </small>
          </div>
        </div>
      </div>
    </div>

    <!-- About This App Screen -->
    <div class="screen screen-modal" id="aboutAppScreen" hidden>
      <header class="screen-header">
        <div></div>
        <h1 data-i18n="aboutAppTitle">üìã About This App</h1>
        <div></div>
      </header>

      <main class="screen-content" style="padding: 1rem">
        <div class="help-content">
          <h2 data-i18n="whatIsThis">What This App Is</h2>
          <p data-i18n="whatIsThisDesc">
            This is a completely static baby activity tracking app. No servers,
            no databases, no cloud services‚Äîeverything runs locally in your
            browser.
          </p>

          <h2 data-i18n="yourDataPrivacy">Your Data & Privacy</h2>
          <p>
            <strong data-i18n="yourDataPrivacyDesc"
              >Your data never leaves your device.</strong
            >
            Everything is stored locally using your browser's storage.
          </p>

          <ul>
            <li data-i18n="noTracking">
              No tracking, no analytics, no telemetry
            </li>
            <li data-i18n="noAccounts">No user accounts or login required</li>
            <li data-i18n="noDataSent">
              No data is sent to any servers (unless you connect Google Sheets
              sync)
            </li>
            <li data-i18n="worksOffline">
              You can use this app completely offline
            </li>
          </ul>

          <h2 data-i18n="googleSheetsSyncOptional">
            Google Sheets Sync (Optional)
          </h2>
          <p data-i18n="googleSheetsSyncDesc">
            If you choose to connect Google Sheets sync, your data will be sent
            to Google's servers through your own Google Apps Script. This is
            entirely optional and controlled by you.
          </p>

          <h2 data-i18n="openSource">Open Source</h2>
          <p data-i18n="openSourceDesc">
            This app is open source. You can view the code, contribute, or run
            your own copy.
          </p>
          <p>
            <a
              href="https://github.com/yekrangiariana/baby-schedule"
              target="_blank"
              style="color: var(--primary); text-decoration: underline"
              data-i18n="viewOnGithub"
            >
              View on GitHub ‚Üí
            </a>
          </p>
        </div>
      </main>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item active" data-screen="home">
        <span class="nav-icon">üè†</span>
        <span class="nav-label" data-i18n="navHome">Home</span>
      </button>
      <button class="nav-item" data-screen="log" id="viewLogBtn">
        <span class="nav-icon">üìã</span>
        <span class="nav-label" data-i18n="navLog">Log</span>
      </button>
      <button class="nav-item" data-screen="insights" id="viewGraphsBtn">
        <span class="nav-icon">üìà</span>
        <span class="nav-label" data-i18n="navInsights">Insights</span>
      </button>
      <button class="nav-item" data-screen="settings" id="openSettingsBtn">
        <span class="nav-icon">‚öôÔ∏è</span>
        <span class="nav-label" data-i18n="navSettings">Settings</span>
      </button>
    </nav>

    <div id="toast" role="status" aria-live="polite"></div>

    <!-- Floating Undo Button -->
    <button id="undoBtn" class="floating-undo" hidden>
      <span class="undo-icon">‚Ü©Ô∏è</span>
      <span class="undo-text" data-i18n="undo">Undo</span>
    </button>

    <!-- Hidden elements for legacy compatibility -->
    <div hidden>
      <div id="progressWrap"></div>
      <div id="progressBar"></div>
      <div id="progressLabel"></div>
      <table id="logTable">
        <tbody id="logTbody"></tbody>
      </table>
      <div id="settingsPanel"></div>
      <div id="logPanel"></div>
      <div id="graphsPanel"></div>
    </div>

    <!-- Welcome/Onboarding Overlay -->
    <div id="welcomeOverlay" class="hidden">
      <div class="welcome-container">
        <!-- Header with Skip Button -->
        <div class="welcome-header">
          <div class="welcome-progress">
            <div class="welcome-progress-dot"></div>
            <div class="welcome-progress-dot"></div>
            <div class="welcome-progress-dot"></div>
            <div class="welcome-progress-dot"></div>
            <div class="welcome-progress-dot"></div>
          </div>
          <button class="welcome-skip-btn" data-i18n="skip">Skip</button>
        </div>

        <!-- Slides Container -->
        <div class="welcome-slides">
          <!-- Slide 1: Language Selection -->
          <div class="welcome-slide">
            <div class="welcome-slide-content">
              <div class="welcome-icon">üëã</div>
              <h1 class="welcome-title">
                <span data-i18n="welcomeTitle">Welcome to</span><br />
                <span
                  style="color: var(--primary); font-size: 1.1em"
                  data-config-text="name"
                  >Little Agenda</span
                >
              </h1>
              <p class="welcome-description" data-i18n="welcomeLanguageDesc">
                Let's start by choosing your preferred language
              </p>

              <div class="welcome-language-grid">
                <div class="welcome-language-option" data-lang="en">
                  <span class="welcome-language-flag">üá¨üáß</span>
                  <span class="welcome-language-name">English</span>
                </div>
                <div class="welcome-language-option" data-lang="fi">
                  <span class="welcome-language-flag">üá´üáÆ</span>
                  <span class="welcome-language-name">Suomi</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 2: Activities Selection -->
          <div class="welcome-slide">
            <div class="welcome-slide-content">
              <div class="welcome-icon">üìù</div>
              <h1 class="welcome-title" data-i18n="welcomeActivitiesTitle">
                Choose Activities to Track
              </h1>
              <p class="welcome-description" data-i18n="welcomeActivitiesDesc">
                Select activities to track. Add more or customise in Settings
                anytime.
              </p>

              <div class="welcome-activities-grid">
                <div class="welcome-activity-option" data-activity="feed">
                  <span class="welcome-activity-emoji">üçº</span>
                  <span class="welcome-activity-name" data-i18n="feed"
                    >Feed</span
                  >
                </div>
                <div class="welcome-activity-option" data-activity="pee">
                  <span class="welcome-activity-emoji">üíß</span>
                  <span class="welcome-activity-name" data-i18n="pee">Pee</span>
                </div>
                <div class="welcome-activity-option" data-activity="poop">
                  <span class="welcome-activity-emoji">üí©</span>
                  <span class="welcome-activity-name" data-i18n="poop"
                    >Poop</span
                  >
                </div>
                <div class="welcome-activity-option" data-activity="sleep">
                  <span class="welcome-activity-emoji">üò¥</span>
                  <span class="welcome-activity-name" data-i18n="sleep"
                    >Sleep</span
                  >
                </div>
                <div class="welcome-activity-option" data-activity="bath">
                  <span class="welcome-activity-emoji">üõÅ</span>
                  <span class="welcome-activity-name" data-i18n="bath"
                    >Bath</span
                  >
                </div>
                <div class="welcome-activity-option" data-activity="play">
                  <span class="welcome-activity-emoji">üéÆ</span>
                  <span class="welcome-activity-name" data-i18n="play"
                    >Play</span
                  >
                </div>
                <div class="welcome-activity-option" data-activity="walk">
                  <span class="welcome-activity-emoji">üö∂</span>
                  <span class="welcome-activity-name" data-i18n="walk"
                    >Walk</span
                  >
                </div>
                <div class="welcome-activity-option" data-activity="medicine">
                  <span class="welcome-activity-emoji">üíä</span>
                  <span class="welcome-activity-name" data-i18n="medicine"
                    >Medicine</span
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 3: Theme Selection -->
          <div class="welcome-slide">
            <div class="welcome-slide-content">
              <div class="welcome-icon">üé®</div>
              <h1 class="welcome-title" data-i18n="welcomeThemeTitle">
                Choose Your Theme
              </h1>
              <p class="welcome-description" data-i18n="welcomeThemeDesc">
                Pick a colour scheme that suits your style
              </p>

              <div class="welcome-theme-grid">
                <div class="welcome-theme-option" data-theme="blossom">
                  <div class="welcome-theme-emoji">üå∏</div>
                  <div class="welcome-theme-name" data-i18n="themeBlossom">
                    Blossom
                  </div>
                </div>
                <div class="welcome-theme-option" data-theme="comet">
                  <div class="welcome-theme-emoji">‚òÑÔ∏è</div>
                  <div class="welcome-theme-name" data-i18n="themeComet">
                    Comet
                  </div>
                </div>
                <div class="welcome-theme-option" data-theme="meadow">
                  <div class="welcome-theme-emoji">üåø</div>
                  <div class="welcome-theme-name" data-i18n="themeMeadow">
                    Meadow
                  </div>
                </div>
                <div class="welcome-theme-option" data-theme="midnight">
                  <div class="welcome-theme-emoji">üåô</div>
                  <div class="welcome-theme-name" data-i18n="themeMidnight">
                    Midnight
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 4: Font Selection -->
          <div class="welcome-slide">
            <div class="welcome-slide-content">
              <div class="welcome-icon">üî§</div>
              <h1 class="welcome-title" data-i18n="welcomeFontTitle">
                Choose Your Font
              </h1>
              <p class="welcome-description" data-i18n="welcomeFontDesc">
                Select a font that's comfortable for you to read
              </p>

              <div class="welcome-font-grid">
                <div class="welcome-font-option" data-font="roboto">
                  <div class="welcome-font-demo" data-font="roboto">Roboto</div>
                </div>
                <div class="welcome-font-option" data-font="mono">
                  <div class="welcome-font-demo" data-font="mono">
                    Roboto Mono
                  </div>
                </div>
                <div class="welcome-font-option" data-font="lora">
                  <div class="welcome-font-demo" data-font="lora">Lora</div>
                </div>
                <div class="welcome-font-option" data-font="inter">
                  <div class="welcome-font-demo" data-font="inter">Inter</div>
                </div>
                <div class="welcome-font-option" data-font="creepster">
                  <div class="welcome-font-demo" data-font="creepster">
                    Creepster
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 5: Tutorial Choice -->
          <div class="welcome-slide">
            <div class="welcome-slide-content">
              <div class="welcome-icon">üéì</div>
              <h1 class="welcome-title" data-i18n="welcomeTutorialTitle">
                Would You Like a Tutorial?
              </h1>
              <p class="welcome-description" data-i18n="welcomeTutorialDesc">
                Take a quick tour to learn the features, or explore on your own.
                All settings can be changed in Settings anytime.
              </p>

              <div class="welcome-tutorial-options">
                <div class="welcome-tutorial-choice" data-tutorial="yes">
                  <div class="welcome-tutorial-choice-title">
                    <span class="welcome-tutorial-choice-emoji">‚ú®</span>
                    <span data-i18n="welcomeTutorialYes"
                      >Yes, Show Me Around</span
                    >
                  </div>
                  <div
                    class="welcome-tutorial-choice-desc"
                    data-i18n="welcomeTutorialYesDesc"
                  >
                    Take a quick tour to learn all the features
                  </div>
                </div>
                <div class="welcome-tutorial-choice" data-tutorial="no">
                  <div class="welcome-tutorial-choice-title">
                    <span class="welcome-tutorial-choice-emoji">üöÄ</span>
                    <span data-i18n="welcomeTutorialNo"
                      >No, I'll Explore Myself</span
                    >
                  </div>
                  <div
                    class="welcome-tutorial-choice-desc"
                    data-i18n="welcomeTutorialNoDesc"
                  >
                    Jump right in and start tracking
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="welcome-navigation">
          <button class="welcome-nav-btn welcome-back-btn" disabled>
            <span data-i18n="back">‚Üê Back</span>
          </button>
          <button class="welcome-nav-btn welcome-next-btn">
            <span data-i18n="next">Next ‚Üí</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Tutorial Wizard -->
    <div id="tutorialWizard" class="wizard-overlay" hidden>
      <div class="wizard-spotlight"></div>
      <div class="wizard-card">
        <div class="wizard-progress">
          <div class="wizard-progress-bar"></div>
        </div>
        <div class="wizard-content">
          <h2 class="wizard-title"></h2>
          <p class="wizard-description"></p>
        </div>
        <div class="wizard-footer">
          <div class="wizard-indicators"></div>
          <div class="wizard-buttons">
            <button
              id="wizardSkip"
              class="wizard-btn wizard-btn-skip"
              data-i18n="skip"
            >
              Skip
            </button>
            <button
              id="wizardBack"
              class="wizard-btn wizard-btn-secondary"
              data-i18n="back"
            >
              Back
            </button>
            <button
              id="wizardNext"
              class="wizard-btn wizard-btn-primary"
              data-i18n="next"
            >
              Next
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="js/translations.js"></script>
    <script src="js/welcome.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
