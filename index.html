<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>Baby Tracker</title>
    <link rel="stylesheet" href="styles.css" />
    <meta name="theme-color" content="#FFF5F7" />
  </head>
  <body>
    <!-- Main Screen -->
    <div class="screen" id="homeScreen">
      <header class="screen-header">
        <h1>ğŸ‘¶ Baby Tracker</h1>
      </header>

      <main class="screen-content">
        <!-- Quick Actions -->
        <section class="quick-actions">
          <button class="action action-feed" data-type="feed">
            <span class="action-emoji">ğŸ¼</span>
            <span class="action-label">Feed</span>
          </button>
          <button class="action action-pee" data-type="pee">
            <span class="action-emoji">ğŸ’§</span>
            <span class="action-label">Pee</span>
          </button>
          <button class="action action-poop" data-type="poop">
            <span class="action-emoji">ğŸ’©</span>
            <span class="action-label">Poop</span>
          </button>
        </section>

        <!-- Today's Summary -->
        <section class="today-summary">
          <h2>ğŸ“Š Today's Summary</h2>
          <div class="now" id="nowText"></div>
          <div class="today-stats" id="todayTotals">Loading...</div>
        </section>

        <!-- Recent Activity -->
        <section class="recent-activity">
          <h3>Recent Activity</h3>
          <div class="recent-list" id="recentList"></div>
        </section>
      </main>
    </div>

    <!-- Activity Log Screen (Full Page) -->
    <div class="screen screen-modal" id="logScreen" hidden>
      <header class="screen-header">
        <button class="back-btn" id="closeLogBtn">
          <span>â†</span>
        </button>
        <h1>ğŸ“‹ Activity Log</h1>
        <button class="icon-btn" id="printBtn">ğŸ–¨ï¸</button>
      </header>

      <div class="screen-toolbar">
        <input type="date" id="dateFilter" class="date-input" />
        <button id="clearFilterBtn" class="btn-small">Clear</button>
      </div>

      <main class="screen-content">
        <!-- Stats Cards -->
        <div class="log-stats">
          <div class="stat-mini stat-feed">
            <div class="stat-mini-icon">ğŸ¼</div>
            <div class="stat-mini-content">
              <div class="stat-mini-label">Last Feed</div>
              <div class="stat-mini-value" id="lastFeed">â€”</div>
            </div>
          </div>
          <div class="stat-mini stat-pee">
            <div class="stat-mini-icon">ğŸ’§</div>
            <div class="stat-mini-content">
              <div class="stat-mini-label">Last Pee</div>
              <div class="stat-mini-value" id="lastPee">â€”</div>
            </div>
          </div>
          <div class="stat-mini stat-poop">
            <div class="stat-mini-icon">ğŸ’©</div>
            <div class="stat-mini-content">
              <div class="stat-mini-label">Last Poop</div>
              <div class="stat-mini-value" id="lastPoop">â€”</div>
            </div>
          </div>
        </div>

        <div class="summary" id="summary"></div>

        <div class="log-entries" id="logEntries"></div>
      </main>
    </div>

    <!-- Insights Screen (Full Page) -->
    <div class="screen screen-modal" id="insightsScreen" hidden>
      <header class="screen-header">
        <button class="back-btn" id="closeGraphsBtn">
          <span>â†</span>
        </button>
        <h1>ğŸ“ˆ Insights</h1>
        <div></div>
      </header>

      <main class="screen-content">
        <div class="graphs-container">
          <div class="graph-card">
            <h3>Today's Activity</h3>
            <canvas id="todayChart" width="300" height="200"></canvas>
          </div>
          <div class="graph-card">
            <h3>Last 24 Hours</h3>
            <canvas id="hourlyChart" width="300" height="200"></canvas>
          </div>
          <div class="graph-card">
            <h3>7-Day Trend</h3>
            <canvas id="weekChart" width="300" height="200"></canvas>
          </div>
          <div class="graph-card">
            <h3>Feed to Diaper Ratio</h3>
            <canvas id="ratioChart" width="300" height="200"></canvas>
            <div class="graph-guide">
              <strong>ğŸ’š Healthy: 1-2 diapers per feed</strong><br />
              &lt;1:1 = Monitor intake â€¢ 1-2:1 = Good â€¢ &gt;2:1 = Great
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Settings Screen (Full Page) -->
    <div class="screen screen-modal" id="settingsScreen" hidden>
      <header class="screen-header">
        <button class="back-btn" id="closeSettingsBtn">
          <span>â†</span>
        </button>
        <h1>âš™ï¸ Settings</h1>
        <div></div>
      </header>

      <main class="screen-content">
        <div class="settings">
          <label class="field">
            <span class="field-label">Google Sheets Sync URL</span>
            <input
              type="url"
              id="appsScriptUrl"
              class="input"
              placeholder="https://script.google.com/macros/s/.../exec"
            />
          </label>
          <label class="field-inline">
            <input type="checkbox" id="syncToggle" />
            <span>Enable cloud sync</span>
          </label>
          <div class="settings-actions">
            <button id="saveSettingsBtn" class="btn-rounded btn-primary">
              ğŸ’¾ Save Settings
            </button>
            <button id="syncNowBtn" class="btn-rounded btn-secondary">
              ğŸ”„ Sync Now
            </button>
          </div>
          <small class="hint">
            ğŸ’¡ Leave blank to keep everything local. See README for setup.
          </small>
        </div>
      </main>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item active" data-screen="home">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-label">Home</span>
      </button>
      <button class="nav-item" data-screen="log" id="viewLogBtn">
        <span class="nav-icon">ğŸ“‹</span>
        <span class="nav-label">Log</span>
      </button>
      <button class="nav-item" data-screen="insights" id="viewGraphsBtn">
        <span class="nav-icon">ğŸ“ˆ</span>
        <span class="nav-label">Insights</span>
      </button>
      <button class="nav-item" data-screen="settings" id="openSettingsBtn">
        <span class="nav-icon">âš™ï¸</span>
        <span class="nav-label">Settings</span>
      </button>
    </nav>

    <div id="toast" role="status" aria-live="polite"></div>

    <!-- Floating Undo Button -->
    <button id="undoBtn" class="floating-undo" hidden>
      <span class="undo-icon">â†©ï¸</span>
      <span class="undo-text">Undo</span>
    </button>

    <!-- Hidden elements for legacy compatibility -->
    <div hidden>
      <div id="progressWrap"></div>
      <div id="progressBar"></div>
      <div id="progressLabel"></div>
      <table id="logTable">
        <tbody id="logTbody"></tbody>
      </table>
      <div id="settingsPanel"></div>
      <div id="logPanel"></div>
      <div id="graphsPanel"></div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
